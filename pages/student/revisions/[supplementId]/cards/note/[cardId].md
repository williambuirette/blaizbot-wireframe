# Carte Note - SupplÃ©ment Ã‰lÃ¨ve

> **Chemin de navigation** : Login â†’ Dashboard Student â†’ Mes rÃ©visions â†’ [SupplÃ©ment] â†’ **Carte Note**  
> **Route** : `/student/revisions/[supplementId]` (avec carte note sÃ©lectionnÃ©e)  
> **RÃ´le** : STUDENT  
> **Mode** : âœï¸ CrÃ©ation / Ã‰dition  
> **Composant source** : `src/app/(dashboard)/student/revisions/[supplementId]/page.tsx`

---

## ğŸ“ Parcours Utilisateur

```
1. Pages publiques
   â””â”€â”€ 01-login.md

2. Authentification rÃ©ussie (Ã‰lÃ¨ve)
   â””â”€â”€ student/dashboard.md

3. Sidebar â†’ Mes rÃ©visions
   â””â”€â”€ student/revisions/liste.md

4. Clic sur un supplÃ©ment
   â””â”€â”€ student/revisions/[supplementId]/

5. Carte Note sÃ©lectionnÃ©e
   â””â”€â”€ VOUS ÃŠTES ICI
```

---

## ğŸ“¸ AperÃ§u Visuel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  ğŸ“„ notes sur la photosynthÃ¨se                                    âš™ï¸     â”‚
â”‚     ğŸ”— La photosynthÃ¨se (Marc DUPONT)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â–¼  complÃ©ment                                           5 cartes  âœï¸  ğŸ—‘ï¸  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â‹®  ğŸ“„ Note de comprÃ©hension           Note  [âœ“ Contenu]  âœï¸  ğŸ—‘ï¸  â–²â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  Contenu de la note                                    âœ¨ AmÃ©liorer avec l'IAâ”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ## PrÃ©paration Test 2 : ComprÃ©hension de Lecture                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  * **Objectif principal :** Ã‰valuer la capacitÃ© Ã  comprendre        â”‚   â”‚
â”‚  â”‚    et interprÃ©ter des textes Ã©crits.                                â”‚   â”‚
â”‚  â”‚  * **Types de questions possibles :**                               â”‚   â”‚
â”‚  â”‚    * **Questions factuelles :** Identifier des informations...      â”‚   â”‚
â”‚  â”‚    * **Questions d'infÃ©rence :** DÃ©duire des informations...        â”‚   â”‚
â”‚  â”‚    * **Questions de vocabulaire :** Comprendre le sens...           â”‚   â”‚
â”‚  â”‚    * **Questions sur l'intention de l'auteur :** Identifier...      â”‚   â”‚
â”‚  â”‚    * **Questions sur la structure du texte :** Comprendre...        â”‚   â”‚
â”‚  â”‚  * **StratÃ©gies de prÃ©paration :**                                  â”‚   â”‚
â”‚  â”‚    * **Lecture active :** Surligner, annoter, prendre des notes...  â”‚   â”‚
â”‚  â”‚    * **Pratique rÃ©guliÃ¨re :** Lire diffÃ©rents types de textes...    â”‚   â”‚
â”‚  â”‚    * **DÃ©veloppement du vocabulaire :** Apprendre de nouveaux...    â”‚   â”‚
â”‚  â”‚    * **Analyse de textes :** S'exercer Ã  identifier les idÃ©es...    â”‚   â”‚
â”‚  â”‚  * **Conseils pour le jour du test :**                              â”‚   â”‚
â”‚  â”‚    * **Lire attentivement les questions :** S'assurer de bien...    â”‚   â”‚
â”‚  â”‚    * **GÃ©rer son temps :** Ne pas passer trop de temps...           â”‚   â”‚
â”‚  â”‚    * **Ã‰liminer les rÃ©ponses incorrectes :** RÃ©duire les options... â”‚   â”‚
â”‚  â”‚    * **Relire ses rÃ©ponses :** VÃ©rifier qu'elles sont cohÃ©rentes... â”‚   â”‚
â”‚  â”‚                                                                 â†˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ’¡ Conseil : Prenez des notes personnelles, reformulez avec vos propres   â”‚
â”‚     mots pour mieux retenir.                                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                              â¬†ï¸                                      â”‚   â”‚
â”‚  â”‚        Glissez un fichier ou cliquez pour uploader                  â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚                      [ Choisir un fichier ]                         â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚   Max 100 MB - PDF, Word, Excel, PowerPoint, Images, VidÃ©os, Audio â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚                        Aucun fichier attachÃ©                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Composants UtilisÃ©s

| Composant | Chemin | Description |
|-----------|--------|-------------|
| `Card` | `@/components/ui/card` | Conteneur principal carte note |
| `Button` | `@/components/ui/button` | Boutons actions (Contenu, Ã‰diter, Supprimer) |
| `Badge` | `@/components/ui/badge` | Badge "Note" (type de carte) |
| `Textarea` | `@/components/ui/textarea` | Ã‰diteur rich text Markdown |
| `Collapsible` | `@/components/ui/collapsible` | Section "complÃ©ment" expandable |
| `Alert` | `@/components/ui/alert` | Conseil en bas de page |
| `Dropzone` | Custom | Zone d'upload fichiers |

---

## ğŸ”— API Endpoints

| MÃ©thode | Endpoint | Description | Payload |
|---------|----------|-------------|---------|
| `GET` | `/api/student/supplements/[supplementId]` | DÃ©tail supplÃ©ment + cartes | - |
| `GET` | `/api/student/supplements/[supplementId]/cards/[cardId]` | DÃ©tail carte note | - |
| `PATCH` | `/api/student/supplements/[supplementId]/cards/[cardId]` | Modifier contenu note | `{ content: string }` |
| `POST` | `/api/student/supplements/[supplementId]/cards/[cardId]/files` | Upload fichier | `FormData` |
| `DELETE` | `/api/student/supplements/[supplementId]/cards/[cardId]/files/[fileId]` | Supprimer fichier | - |
| `POST` | `/api/student/supplements/[supplementId]/cards/[cardId]/ai-improve` | AmÃ©liorer avec IA | `{ content: string }` |

---

## ğŸ’¾ Types & Interfaces

```typescript
interface NoteCard {
  id: string;
  type: 'NOTE';
  title: string;
  content: string;           // Contenu Markdown
  order: number;
  supplementId: string;
  attachments: Attachment[];
  createdAt: Date;
  updatedAt: Date;
}

interface Attachment {
  id: string;
  name: string;
  type: string;              // 'pdf', 'word', 'image', etc.
  url: string;
  size: number;              // en bytes
  uploadedAt: Date;
}

interface Supplement {
  id: string;
  title: string;
  courseId?: string;         // LiÃ© Ã  un cours (optionnel)
  courseName?: string;
  teacherName?: string;
  cards: NoteCard[];
  createdAt: Date;
}
```

---

## ğŸ“‹ Structure de la Page

### Header SupplÃ©ment
| Ã‰lÃ©ment | Description |
|---------|-------------|
| **â† Bouton** | Retour Ã  la liste des rÃ©visions |
| **ğŸ“„ IcÃ´ne** | IcÃ´ne supplÃ©ment |
| **Titre** | Nom du supplÃ©ment (ex: "notes sur la photosynthÃ¨se") |
| **ğŸ”— Lien cours** | Cours associÃ© + professeur (cliquable) |
| **âš™ï¸ ParamÃ¨tres** | Menu options supplÃ©ment |

### Section ComplÃ©ment (Accordion)
| Ã‰lÃ©ment | Description |
|---------|-------------|
| **Titre section** | "complÃ©ment" |
| **Badge** | "5 cartes" (nombre de cartes) |
| **Boutons** | âœï¸ Ã‰diter nom + ğŸ—‘ï¸ Supprimer section |
| **Ã‰tat** | Expand/Collapse (â–¼/â–²) |

### Carte Note (dans la section)
| Ã‰lÃ©ment | Description |
|---------|-------------|
| **â‹® Handle** | Drag & drop pour rÃ©ordonner |
| **ğŸ“„ IcÃ´ne** | Type de carte (Note) |
| **Titre** | Nom de la carte (ex: "Note de comprÃ©hension") |
| **Badge** | "Note" (orange) |
| **[âœ“ Contenu]** | Toggle afficher/masquer contenu |
| **Boutons** | âœï¸ Ã‰diter + ğŸ—‘ï¸ Supprimer carte |

### Ã‰diteur de Contenu
| Ã‰lÃ©ment | Description |
|---------|-------------|
| **Label** | "Contenu de la note" |
| **âœ¨ AmÃ©liorer avec l'IA** | Bouton gÃ©nÃ©ration IA |
| **Textarea** | Ã‰diteur Markdown multi-lignes |
| **Resize** | Coin resize (â†˜) |

### Zone Conseil
| Ã‰lÃ©ment | Description |
|---------|-------------|
| **ğŸ’¡ IcÃ´ne** | Ampoule conseil |
| **Texte** | "Prenez des notes personnelles, reformulez avec vos propres mots pour mieux retenir." |

### Zone Upload Fichiers
| Ã‰lÃ©ment | Description |
|---------|-------------|
| **â¬†ï¸ IcÃ´ne** | Upload |
| **Texte** | "Glissez un fichier ou cliquez pour uploader" |
| **Bouton** | "Choisir un fichier" |
| **Formats** | "Max 100 MB - PDF, Word, Excel, PowerPoint, Images, VidÃ©os, Audio" |
| **Ã‰tat** | "Aucun fichier attachÃ©" ou liste fichiers |

---

## ğŸ”„ Comportements

### Ã‰dition du contenu
1. L'Ã©lÃ¨ve tape dans le textarea
2. Sauvegarde automatique (debounce 1s)
3. Indicateur "EnregistrÃ©" ou "Enregistrement..."
4. Support Markdown (preview possible)

### AmÃ©liorer avec l'IA
1. Clic sur "âœ¨ AmÃ©liorer avec l'IA"
2. Envoi du contenu actuel Ã  l'API
3. Loading spinner
4. RÃ©ponse IA affichÃ©e en suggestion
5. L'Ã©lÃ¨ve peut accepter/rejeter

### Upload de fichiers
1. Glisser-dÃ©poser OU clic sur "Choisir un fichier"
2. Validation format + taille (max 100 MB)
3. Upload avec progress bar
4. Fichier apparaÃ®t dans la liste
5. PossibilitÃ© de supprimer

### Toggle Contenu
1. Clic sur "[âœ“ Contenu]"
2. Affiche/masque l'Ã©diteur et la zone upload
3. Ã‰tat persistÃ© dans localStorage

---

## ğŸ”„ Actions Utilisateur

| Action | Comportement |
|--------|--------------|
| **Cliquer â†** | Retour `/student/revisions` |
| **Cliquer cours liÃ©** | Ouvre `/student/courses/[courseId]` |
| **Expand section** | Affiche les cartes de la section |
| **Toggle Contenu** | Affiche/masque Ã©diteur |
| **Ã‰diter textarea** | Sauvegarde auto du contenu |
| **âœ¨ AmÃ©liorer IA** | GÃ©nÃ¨re suggestion IA |
| **Upload fichier** | Ajoute piÃ¨ce jointe |
| **âœï¸ Ã‰diter carte** | Ouvre modale Ã©dition titre |
| **ğŸ—‘ï¸ Supprimer carte** | Confirmation + suppression |

---

## âœ… RÃ¨gles de Validation

```typescript
// Contenu note
âœ“ content : string (optionnel, peut Ãªtre vide)
âœ“ Markdown supportÃ©
âœ“ Pas de limite de caractÃ¨res

// Fichiers
âœ“ Taille max : 100 MB par fichier
âœ“ Formats acceptÃ©s : PDF, Word, Excel, PowerPoint, Images, VidÃ©os, Audio
âœ“ Extensions : .pdf, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .jpg, .jpeg, .png, .gif, .mp4, .mp3, .wav
```

---

## ğŸ“Š RÃ©capitulatif Technique

**Type de page** : Ã‰dition carte note (supplÃ©ment)  
**Layout** : Header + Section collapsible + Ã‰diteur + Upload  
**Mode** : âœï¸ Lecture/Ã‰criture (Ã©lÃ¨ve propriÃ©taire)  
**DonnÃ©es** : API `/api/student/supplements/[supplementId]/cards/[cardId]`  
**Sauvegarde** : Auto-save avec debounce 1s  
**IA** : AmÃ©lioration du contenu disponible  

---

**Navigation** :
- â† [Liste rÃ©visions](../../liste.md)
- â†’ [Autres cartes du supplÃ©ment](../lesson/[cardId].md) *(si existantes)*
- ğŸ”— [Cours associÃ©](../../../../courses/detail/[id].md) *(si liÃ©)*

---

*Fichier crÃ©Ã© le 16 janvier 2026*