# Nouveau cours

> **Chemin de navigation** : Login â†’ Dashboard Teacher â†’ Mes cours â†’ **+ Nouveau cours**  
> **Route** : `/teacher/courses/new`  
> **RÃ´le** : TEACHER  
> **Composant source** : `src/app/(dashboard)/teacher/courses/new/page.tsx`

---

## ğŸ“ Parcours Utilisateur

```
1. Pages publiques
   â””â”€â”€ 01-login.md

2. Authentification rÃ©ussie (Professeur)
   â””â”€â”€ teacher/dashboard.md

3. Sidebar â†’ Mes cours
   â””â”€â”€ teacher/courses/liste.md

4. Clic sur bouton "+ Nouveau cours"
   â””â”€â”€ VOUS ÃŠTES ICI
```

---

## ğŸ“¸ AperÃ§u Visuel - Nouveau cours

### Onglet : Informations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard                           ğŸ” Rechercher...    ğŸ””  [MD] Marc DUPONT â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚                                                                 â”‚
â”‚ ğŸ  Dashb.  â”‚  â†  Nouveau cours                    ğŸ“„ Brouillon   [Publier] â”‚
â”‚            â”‚     CrÃ©ez un nouveau cours pour vos Ã©lÃ¨ves                      â”‚
â”‚ ğŸ« Mes     â”‚                                                                 â”‚
â”‚   classes  â”‚  â„¹ï¸  Informations        ğŸ“ Contenu & Fichiers                  â”‚
â”‚            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚ ğŸ‘¥ Mes     â”‚                                                                 â”‚
â”‚   Ã©lÃ¨ves   â”‚  Informations gÃ©nÃ©rales                                         â”‚
â”‚            â”‚  Ces informations seront visibles sur la page du cours         â”‚
â”‚ ğŸ“š Mes     â”‚                                                                 â”‚
â”‚   cours    â”‚  Titre du cours *                        MatiÃ¨re *              â”‚
â”‚            â”‚  Ex: Introduction Ã  la                   SÃ©lectionner â–¼         â”‚
â”‚ ğŸ“… Agendas â”‚  photosynthÃ¨se                                                  â”‚
â”‚   et       â”‚                                                                 â”‚
â”‚   Assigna. â”‚  Description                                                    â”‚
â”‚            â”‚  DÃ©crivez briÃ¨vement le cours...                               â”‚
â”‚ ğŸ’¬ Messag. â”‚                                                                 â”‚
â”‚            â”‚  Objectifs pÃ©dagogiques                                         â”‚
â”‚            â”‚  Un objectif par ligne...                                       â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  Entrez un objectif par ligne                                   â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  Nom du premier chapitre *                                      â”‚
â”‚            â”‚  Introduction                                                   â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  Ce chapitre contiendra le contenu initial du cours            â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  DifficultÃ©                 DurÃ©e (minutes)        Tags        â”‚
â”‚            â”‚  IntermÃ©diaire â–¼            Ex: 45                 biologie,   â”‚
â”‚            â”‚                                                    photosynthÃ¨seâ”‚
â”‚            â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Onglet : Contenu & Fichiers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard                           ğŸ” Rechercher...    ğŸ””  [MD] Marc DUPONT â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚  â†  Nouveau cours                    ğŸ“„ Brouillon   [Publier] â”‚
â”‚            â”‚     CrÃ©ez un nouveau cours pour vos Ã©lÃ¨ves                      â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  â„¹ï¸  Informations        ğŸ“ Contenu & Fichiers                  â”‚
â”‚            â”‚                          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  ğŸ¤– Assistant IA                                                â”‚
â”‚            â”‚  GÃ©nÃ©rez automatiquement le contenu de votre cours             â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  Instructions pour l'IA (ex: focus sur les exemples            â”‚
â”‚            â”‚  pratiques, niveau lycÃ©e...)                                    â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  [ğŸ”® GÃ©nÃ©rer avec IA]                                           â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  Contenu du cours                                               â”‚
â”‚            â”‚  Ce contenu deviendra la premiÃ¨re carte de votre chapitre      â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚            â”‚  â”‚ â†¶ â†·  B  I  U  S  A  Hâ‚ Hâ‚‚ Hâ‚ƒ  â‰¡ â‰£  "" â†” -  âŠ• âŠ–  ğŸ”— ğŸ“·   â”‚ â”‚
â”‚            â”‚  â”‚                                                           â”‚ â”‚
â”‚            â”‚  â”‚                                                           â”‚ â”‚
â”‚            â”‚  â”‚                                                           â”‚ â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  Fichiers et ressources                                         â”‚
â”‚            â”‚  Ces fichiers seront attachÃ©s Ã  la premiÃ¨re carte du cours     â”‚
â”‚            â”‚                                                                 â”‚
â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚            â”‚  â”‚                        â¬†                                  â”‚ â”‚
â”‚            â”‚  â”‚   Glissez-dÃ©posez des fichiers ou cliquez pour            â”‚ â”‚
â”‚            â”‚  â”‚   sÃ©lectionner                                            â”‚ â”‚
â”‚            â”‚  â”‚   PDF, images, Word, Excel, PowerPoint, ZIP â€¢ Max 10 MB   â”‚ â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Composants UtilisÃ©s

| Composant | Chemin | Description |
|-----------|--------|-------------|
| `DashboardShell` | `@/components/layout/DashboardShell` | Layout avec sidebar |
| `Header` | `@/components/layout/Header` | Barre supÃ©rieure |
| `Sidebar` | `@/components/layout/Sidebar` | Navigation professeur |
| `Button` | `@/components/ui/button` | Boutons Publier, Brouillon, GÃ©nÃ©rer |
| `Tabs` | `@/components/ui/tabs` | Onglets (Informations, Contenu) |
| `Input` | `@/components/ui/input` | Champs texte (titre, durÃ©e, tags) |
| `Textarea` | `@/components/ui/textarea` | Description, objectifs |
| `Select` | `@/components/ui/select` | Dropdowns (matiÃ¨re, difficultÃ©) |
| `RichTextEditor` | `@/components/ui/rich-text-editor` | Ã‰diteur WYSIWYG |
| `FileUpload` | `@/components/ui/file-upload` | Zone drag & drop |
| `Alert` | `@/components/ui/alert` | Messages d'aide (info bleue) |
| `Badge` | `@/components/ui/badge` | Badge "Brouillon" |

---

## ğŸ“Š Structure de la Page

### En-tÃªte

| Ã‰lÃ©ment | Description |
|---------|-------------|
| **â† Bouton** | Retour Ã  la liste des cours |
| **Titre** | "Nouveau cours" |
| **Sous-titre** | "CrÃ©ez un nouveau cours pour vos Ã©lÃ¨ves" |
| **Badge Brouillon** | Indique l'Ã©tat (ğŸ“„ Brouillon) |
| **Bouton Publier** | Valide et publie le cours |

### Onglets (2)

| Onglet | Contenu |
|--------|---------|
| **â„¹ï¸ Informations** | MÃ©tadonnÃ©es du cours (titre, matiÃ¨re, etc.) |
| **ğŸ“ Contenu & Fichiers** | Assistant IA + Ã©diteur + uploads |

---

## â„¹ï¸ Onglet : Informations

### Section : Informations gÃ©nÃ©rales

| Champ | Type | Obligatoire | Description |
|-------|------|-------------|-------------|
| **Titre du cours** | Input | âœ… | Nom du cours (ex: "Introduction Ã  la photosynthÃ¨se") |
| **MatiÃ¨re** | Select | âœ… | Choix parmi les matiÃ¨res existantes |
| **Description** | Textarea | âŒ | Description courte du cours |
| **Objectifs pÃ©dagogiques** | Textarea | âŒ | Un objectif par ligne |
| **Nom du premier chapitre** | Input | âœ… | Nom du chapitre initial (ex: "Introduction") |
| **DifficultÃ©** | Select | âŒ | DÃ©butant, IntermÃ©diaire, AvancÃ© |
| **DurÃ©e (minutes)** | Input number | âŒ | DurÃ©e estimÃ©e (ex: 45) |
| **Tags** | Input tags | âŒ | Mots-clÃ©s sÃ©parÃ©s par virgules |

### Valeurs par dÃ©faut

| Champ | Valeur par dÃ©faut |
|-------|-------------------|
| Nom du premier chapitre | "Introduction" |
| DifficultÃ© | "IntermÃ©diaire" |
| DurÃ©e | Vide |
| Tags | Vide |

### Messages d'aide

| Champ | Message |
|-------|---------|
| Informations gÃ©nÃ©rales | "Ces informations seront visibles sur la page du cours" |
| Nom du premier chapitre | "Ce chapitre contiendra le contenu initial du cours" |

---

## ğŸ“ Onglet : Contenu & Fichiers

### Section : Assistant IA

| Ã‰lÃ©ment | Description |
|---------|-------------|
| **Titre** | ğŸ¤– Assistant IA |
| **Sous-titre** | "GÃ©nÃ©rez automatiquement le contenu de votre cours" |
| **Textarea** | Instructions pour l'IA (prompt personnalisÃ©) |
| **Placeholder** | "Instructions pour l'IA (ex: focus sur les exemples pratiques, niveau lycÃ©e...)" |
| **Bouton** | ğŸ”® GÃ©nÃ©rer avec IA |

#### Comportement Assistant IA
- Utilisateur saisit des instructions
- Clic sur "GÃ©nÃ©rer avec IA"
- Appel API vers service IA (Gemini/GPT)
- Contenu gÃ©nÃ©rÃ© insÃ©rÃ© dans l'Ã©diteur
- Loader pendant la gÃ©nÃ©ration (5-15 secondes)

### Section : Contenu du cours

| Ã‰lÃ©ment | Description |
|---------|-------------|
| **Titre** | Contenu du cours |
| **Aide** | "Ce contenu deviendra la premiÃ¨re carte de votre chapitre" |
| **Ã‰diteur** | WYSIWYG riche (TipTap ou similaire) |

#### Barre d'outils Ã‰diteur

| IcÃ´ne | Fonction |
|-------|----------|
| â†¶ â†· | Annuler / Refaire |
| **B I U S** | Gras, Italique, SoulignÃ©, BarrÃ© |
| **A** | Couleur texte |
| **Hâ‚ Hâ‚‚ Hâ‚ƒ** | Titres (niveaux 1-3) |
| **â‰¡ â‰£** | Listes (puces, numÃ©rotÃ©es) |
| **"" â†” -** | Citation, Indentation, SÃ©parateur |
| **âŠ• âŠ–** | Tableau (ajouter/retirer) |
| **ğŸ”— ğŸ“·** | Lien, Image |

### Section : Fichiers et ressources

| Ã‰lÃ©ment | Description |
|---------|-------------|
| **Titre** | Fichiers et ressources |
| **Aide** | "Ces fichiers seront attachÃ©s Ã  la premiÃ¨re carte du cours" |
| **Zone Upload** | Drag & drop ou clic pour sÃ©lectionner |
| **Formats acceptÃ©s** | PDF, images, Word, Excel, PowerPoint, ZIP |
| **Taille max** | 10 MB par fichier |

---

## ğŸ”— API Endpoints

| MÃ©thode | Endpoint | Description | Payload |
|---------|----------|-------------|---------|
| `POST` | `/api/teacher/courses` | CrÃ©er le cours | `{ title, subjectId, description, objectives, firstChapter, difficulty, duration, tags, content, files }` |
| `POST` | `/api/teacher/courses/generate` | GÃ©nÃ©rer contenu avec IA | `{ prompt, subject, level }` |
| `POST` | `/api/upload` | Upload fichiers | FormData avec fichiers |
| `GET` | `/api/subjects` | Liste des matiÃ¨res | - |

---

## ğŸ’¾ Types & Interfaces

```typescript
interface CreateCourseForm {
  // Onglet Informations
  title: string;                  // Obligatoire
  subjectId: string;              // Obligatoire
  description?: string;
  objectives?: string[];          // Tableau (1 ligne = 1 objectif)
  firstChapterName: string;       // Obligatoire (dÃ©faut: "Introduction")
  difficulty?: "BEGINNER" | "INTERMEDIATE" | "ADVANCED";
  duration?: number;              // En minutes
  tags?: string[];
  
  // Onglet Contenu
  content?: string;               // HTML de l'Ã©diteur
  files?: File[];                 // Fichiers uploadÃ©s
}

interface AiGenerateRequest {
  prompt: string;
  subject: string;
  level: "BEGINNER" | "INTERMEDIATE" | "ADVANCED";
}

interface AiGenerateResponse {
  content: string;                // HTML gÃ©nÃ©rÃ©
  generationTime: number;         // Temps en ms
}
```

---

## ğŸ¯ Comportements

### Navigation entre Onglets
- Clic sur onglet : Change de vue
- DonnÃ©es persistÃ©es entre onglets (form state)
- URL synchronisÃ©e : `?tab=informations` ou `?tab=contenu`

### Validation Formulaire

| Condition | Message d'erreur |
|-----------|------------------|
| Titre vide | "Le titre est obligatoire" |
| MatiÃ¨re non sÃ©lectionnÃ©e | "Veuillez sÃ©lectionner une matiÃ¨re" |
| Nom chapitre vide | "Le nom du premier chapitre est obligatoire" |

### Bouton Publier

| Ã‰tat | Comportement |
|------|--------------|
| **Formulaire invalide** | Bouton dÃ©sactivÃ© + tooltip "ComplÃ©tez les champs obligatoires" |
| **Formulaire valide** | Bouton actif + clic â†’ crÃ©ation cours |
| **En cours** | Loader + dÃ©sactivÃ© |
| **SuccÃ¨s** | Toast "Cours crÃ©Ã© !" + redirection vers dÃ©tail |
| **Erreur** | Toast d'erreur + reste sur la page |

### Assistant IA

| Action | Comportement |
|--------|--------------|
| **Clic GÃ©nÃ©rer** | Appel API + loader |
| **SuccÃ¨s** | Contenu insÃ©rÃ© dans Ã©diteur + toast "Contenu gÃ©nÃ©rÃ©" |
| **Erreur** | Toast d'erreur + retry possible |
| **Ã‰dition manuelle** | Contenu IA Ã©ditable comme du texte normal |

### Upload Fichiers

| Action | Comportement |
|--------|--------------|
| **Drag & Drop** | Upload automatique |
| **Clic zone** | Ouvre file picker |
| **Fichier valide** | Ajout dans liste + preview |
| **Fichier invalide** | Toast d'erreur (format ou taille) |
| **Suppression** | Clic sur Ã— dans la liste |

### Brouillon

| Condition | Comportement |
|-----------|--------------|
| **Auto-save** | Sauvegarde toutes les 30 secondes |
| **Badge** | "ğŸ“„ Brouillon" visible tant que non publiÃ© |
| **Restauration** | RÃ©cupÃ©ration au rechargement |

---

## ğŸ”— Navigation

| Action | Destination |
|--------|-------------|
| Bouton **â†** | [liste.md](liste.md) |
| Bouton Publier (succÃ¨s) | [detail/[id].md](detail/[id].md) |
| â† Sidebar Mes cours | [liste.md](liste.md) |

---

## ğŸ“ Notes

> **Workflow de crÃ©ation** :
> 1. Remplir onglet "Informations" (titre, matiÃ¨re, premier chapitre)
> 2. Optionnel : Utiliser l'Assistant IA pour gÃ©nÃ©rer du contenu
> 3. ComplÃ©ter/Ã©diter dans l'Ã©diteur riche
> 4. Optionnel : Uploader des fichiers
> 5. Cliquer sur "Publier"
> 6. Redirection vers le cours crÃ©Ã©

> **Assistant IA** :
> - Utilise l'API Gemini ou GPT-4
> - GÃ©nÃ¨re du contenu basÃ© sur : titre, matiÃ¨re, difficultÃ©, instructions custom
> - GÃ©nÃ©ration : 5-15 secondes selon la complexitÃ©
> - Contenu gÃ©nÃ©rÃ© : HTML formatÃ© insÃ©rÃ© dans l'Ã©diteur
> - Ã‰ditable librement aprÃ¨s gÃ©nÃ©ration

> **Premier chapitre** :
> - CrÃ©Ã© automatiquement avec le cours
> - Contient le contenu de l'Ã©diteur + fichiers uploadÃ©s
> - Nom personnalisable (dÃ©faut: "Introduction")
> - Devient la premiÃ¨re "carte" du cours

> **Fichiers** :
> - Max 10 MB par fichier
> - Formats : PDF, JPG, PNG, GIF, DOCX, XLSX, PPTX, ZIP
> - Stockage : Vercel Blob ou AWS S3
> - AttachÃ©s au premier chapitre

> **Objectifs pÃ©dagogiques** :
> - Format : 1 ligne = 1 objectif
> - AffichÃ©s comme liste Ã  puces sur la page du cours
> - Non obligatoires

> **Tags** :
> - SÃ©parÃ©s par virgules
> - Convertis en badges
> - UtilisÃ©s pour la recherche et le filtrage

> **Auto-save** :
> - Sauvegarde locale (localStorage) toutes les 30 secondes
> - Badge "Brouillon" visible
> - RÃ©cupÃ©ration automatique si rechargement
> - Nettoyage aprÃ¨s publication

> **Performance** :
> - Debounce sur les champs (300ms)
> - Upload asynchrone (pas de blocage UI)
> - GÃ©nÃ©ration IA en background avec loader

---

**Navigation** :
- â† [Liste des cours](liste.md)
- â†’ [DÃ©tail cours](detail/[id].md) *(aprÃ¨s publication)*

*Date : 13 dÃ©cembre 2025*

